//# sourceMappingURL=indexInit.js.map
           #communityModal .subcategory[data-subcategory="${n}"]`);v&&v.classList.add("active")}else{const v=document.querySelector('#communityModal .filter-category[data-category="all"]');v&&v.classList.add("active")}if(o&&n?await Re(n):await Kn(),a){Xn(a);const v=document.getElementById("communitySearchBar");v&&(v.value=a)}const f=document.querySelector("#communityModal h3");if(f){let v="Community Builds";n&&n!=="all"&&(v+=` - ${ve(n)}`),a&&(v+=` - ${a}`),f.textContent=v}const b=document.querySelectorAll(".sort-button"),k=localStorage.getItem("communitySortMode")||"hot";b.forEach(v=>{v.classList.remove("active"),v.id==="sort"+ve(k)&&v.classList.add("active")})}localStorage.removeItem("restoreCommunityModal"),localStorage.removeItem("communityFilterType"),localStorage.removeItem("communityFilterValue"),localStorage.removeItem("communitySearchQuery")}H("signInBtn","click",window.handleSignIn),H("signOutBtn","click",window.handleSignOut),H("switchAccountBtn","click",window.handleSwitchAccount);const s=document.getElementById("saveBuildButton"),d=document.getElementById("newBuildButton"),i=document.getElementById("openFocusModal"),l=document.getElementById("focusModal"),r=document.getElementById("closeFocusModal"),u=document.getElementById("increaseFontBtn"),c=document.getElementById("decreaseFontBtn"),g=document.getElementById("focusContent");let y=1;const p=()=>{if(!l||!g)return;const m=document.getElementById("buildOrderTable");if(m){g.innerHTML=m.outerHTML;const f=g.querySelector("#openFocusModal");f&&f.remove(),g.style.fontSize=`${y}rem`}document.body.classList.add("modal-open"),l.style.display="block"},h=()=>{l&&(l.style.display="none"),document.body.classList.remove("modal-open")},B=()=>{y=Math.min(3,y+.1),g&&(g.style.fontSize=`${y}rem`)},I=()=>{y=Math.max(.5,y-.1),g&&(g.style.fontSize=`${y}rem`)};i&&i.addEventListener("click",p),r&&r.addEventListener("click",h),u&&u.addEventListener("click",B),c&&c.addEventListener("click",I),l&&window.addEventListener("click",m=>{m.target===l&&h()}),document.addEventListener("keydown",m=>{m.key==="Escape"&&h()}),H("saveBuildButton","click",async()=>{var f,b;const m=Ft();if(m)try{console.log("üîÑ Updating build:",m),await us(m);const k=await Z(q(V,`users/${Q.currentUser.uid}/builds/${m}`));if(k.exists()){const z=Bt(),ae=z.findIndex(G=>G.id===m);ae!==-1&&(z[ae]={...z[ae],...k.data()},Mt(),An(ae))}P("‚úÖ Build updated!","success");const v=(f=document.getElementById("replayLinkInput"))==null?void 0:f.value.trim(),T=document.getElementById("replayInputWrapper"),A=document.getElementById("replayViewWrapper"),x=document.getElementById("replayDownloadBtn");T&&(T.style.display="flex"),v&&A&&x&&(A.style.display="block",x.href=v,x.innerText="Download Replay"),s.disabled=!0,s.style.backgroundColor=""}catch(k){console.error("Update failed:",k),P("‚ùå Failed to update build","error")}else try{const k=await cs();if(!k)return;lt(k),s.innerText="Update Build",s.removeAttribute("data-tooltip"),s.offsetWidth,s.setAttribute("data-tooltip","Update Current Build"),d.style.display="inline-block",P("‚úÖ Build saved!","success");const v=document.getElementById("editModeBanner");v&&(v.innerHTML='<img src="./img/SVG/pencil.svg" class="svg-icon" alt="Edit"> <strong>Edit Mode</strong>',v.style.display="flex",v.style.backgroundColor="#165016",v.style.color="#fff",ke());const T=(b=document.getElementById("replayLinkInput"))==null?void 0:b.value.trim(),A=document.getElementById("replayInputWrapper"),x=document.getElementById("replayViewWrapper"),z=document.getElementById("replayDownloadBtn");A&&(A.style.display="flex"),T&&x&&z?(x.style.display="block",z.href=T,z.innerText="Download Replay"):x&&(x.style.display="none"),s.disabled=!0,s.style.backgroundColor=""}catch(k){console.error("Save failed:",k),P("‚ùå Failed to save build","error")}}),H("newBuildButton","click",()=>{lt(null),ln(),window.lastReplayFile=null;const m=document.getElementById("reparseLastReplayButton");m&&(m.style.display="none");const f=document.getElementById("editModeBanner");f&&(f.style.display="none",f.style.backgroundColor="",f.style.color="");const b=document.getElementById("saveBuildButton"),k=document.getElementById("updateBuildButton"),v=document.getElementById("newBuildButton");b&&(b.style.display="inline-block"),k&&(k.style.display="none"),v&&(v.style.display="none"),s.innerText="Save Build",s.removeAttribute("data-tooltip"),s.offsetWidth,s.setAttribute("data-tooltip","Save Current Build")}),Q.onAuthStateChanged(async m=>{const f=document.getElementById("showBuildsButton"),b=document.getElementById("showCommunityModalButton");if(f&&(f.disabled=!1),b&&(b.disabled=!1),m){await Zt(),mt(m),await Uo(),await Yt();const k=await Dt();mn(k),Mt();const v=document.getElementById("bracketInputToggle");v&&(v.checked=$e());const T=document.getElementById("buildInputToggle");T&&(T.checked=Qt()),Wt(),jt(),Ht()}}),za(),Ko(),H("showBuildsButton","click",()=>{if(!Q.currentUser){const m=document.getElementById("auth-container");m.classList.add("highlight"),m.scrollIntoView({behavior:"smooth",block:"center"}),setTimeout(()=>m.classList.remove("highlight"),1500);return}showBuildsModal()}),H("filterPublicBtn","click",()=>{document.getElementById("filterPublicBtn").classList.add("active"),document.getElementById("filterClanBtn").classList.remove("active"),localStorage.setItem("communityBuildType","public"),Re(localStorage.getItem("communityFilterValue")||"all")}),H("filterClanBtn","click",()=>{document.getElementById("filterClanBtn").classList.add("active"),document.getElementById("filterPublicBtn").classList.remove("active"),localStorage.setItem("communityBuildType","clan"),Re(localStorage.getItem("communityFilterValue")||"all")}),H("showCommunityModalButton","click",async()=>{var T,A;const m=document.getElementById("communityModal");if(!m)return;m.style.display="block",document.getElementById("communityBuildsContainer").scrollTop=0,localStorage.setItem("communityBuildType","public"),(T=document.getElementById("filterPublicBtn"))==null||T.classList.add("active"),(A=document.getElementById("filterClanBtn"))==null||A.classList.remove("active"),document.querySelectorAll("#communityModal .filter-category, .subcategory").forEach(x=>x.classList.remove("active"));const f=document.querySelector('#communityModal .filter-category[data-category="all"]');f&&f.classList.add("active");const b=document.getElementById("communitySearchBar");b&&(b.value="");const k=localStorage.getItem("communityFilterValue")||"all";k!=="all"?await Re(k):await Kn();const v=document.querySelector("#communityModal h3");v&&(v.textContent="Community Builds")}),H("closeCommunityModal","click",()=>{const m=document.getElementById("communityModal");m&&(m.style.display="none")}),H("openTemplatesButton","click",()=>{bs()}),H("saveTemplateButton","click",()=>{ws()});const E=document.getElementById("buildOrderInput");E&&E.addEventListener("input",()=>{he(E.value.trim())}),gt("buildSearchBar",m=>rs(m)),gt("communitySearchBar",async m=>{await Xn(m)}),gt("templateSearchBar",m=>{vs(m)}),gt("videoInput",m=>ia(m));let M=null;window.lastReplayFile=null,H("replayButton","click",()=>{const m=document.getElementById("replayFileInput");m&&m.click()});async function C(m){const f=document.getElementById("optionsLoadingWrapper");f&&(f.style.display="flex");const b=document.getElementById("playerToggleWrapper");if(!b)return;b.textContent="Loading...";const k=new FormData;k.append("replay",m);try{const T=await(await fetch("https://z-build-order.onrender.com/players",{method:"POST",body:k})).json(),A=Array.isArray(T)?T:T.players;b.innerHTML="",A.forEach((z,ae)=>{const G=document.createElement("button"),fe=z.race?z.race.charAt(0).toUpperCase():"?";G.textContent=`${z.name} (${fe})`,G.className="player-toggle-btn",G.dataset.pid=z.pid,G.addEventListener("click",()=>{xe=z.pid,Array.from(b.children).forEach(Ae=>Ae.classList.remove("active")),G.classList.add("active"),pt()}),ae===0&&(G.classList.add("active"),xe=z.pid),b.appendChild(G)});const x=T.matchup;Je=A,Gt=x}catch(v){console.error("Failed to fetch players",v),b.textContent="",[1,2].forEach((T,A)=>{const x=document.createElement("button");x.textContent=`Player ${T}`,x.className="player-toggle-btn",x.dataset.pid=T,x.addEventListener("click",()=>{xe=T,Array.from(b.children).forEach(z=>z.classList.remove("active")),x.classList.add("active"),pt()}),A===0&&(x.classList.add("active"),xe=T),b.appendChild(x)})}f&&(f.style.display="none")}async function w(m){var z,ae,G,fe,Ae;const f=new FormData;f.append("replay",m),xe!==null&&f.append("player",xe),(z=document.getElementById("excludeWorkersCheckbox"))!=null&&z.checked&&f.append("exclude_workers","1"),(ae=document.getElementById("excludeUnitsCheckbox"))!=null&&ae.checked&&f.append("exclude_units","1"),(G=document.getElementById("excludeSupplyCheckbox"))!=null&&G.checked&&f.append("exclude_supply","1"),(fe=document.getElementById("excludeTimeCheckbox"))!=null&&fe.checked&&f.append("exclude_time","1"),(Ae=document.getElementById("compactModeCheckbox"))!=null&&Ae.checked&&(f.append("compact","1"),f.append("exclude_time","1"));const b=document.getElementById("stopLimitInput"),k=document.getElementById("toggleStopTypeBtn"),v=b==null?void 0:b.value,T=(k==null?void 0:k.dataset.type)||"supply";v&&(T==="time"?f.append("stop_time",v):f.append("stop_supply",v));try{const Ze=await(await fetch("https://z-build-order.onrender.com/upload",{method:"POST",body:f})).text(),Ke=document.getElementById("buildOrderInput");Ke&&(Ke.value=Ze),he(Ze),Fe("replay_uploaded",{fileName:m.name,sizeKB:Math.round(m.size/1024)})}catch(Me){console.error("Replay upload failed",Me),alert("Could not parse the replay. Make sure the Python backend is running."),Fe("replay_upload_failed",{error:Me.message})}const A=document.getElementById("replayOptionsModal");A&&(A.style.display="none");const x=document.getElementById("buildCategoryDropdown");if(x&&Je.length>=2){const Me=Number(xe),Ze=Je.find(qe=>qe.pid===Me),Ke=Je.find(qe=>qe.pid!==Me);if(Ze&&Ke){const qe=Oa=>Oa[0].toUpperCase(),Ra=`${qe(Ze.race)}v${qe(Ke.race)}`;x.value=Ra.toLowerCase(),Ge()}else Gt&&(x.value=Gt,Ge())}}H("replayFileInput","change",async m=>{const f=m.target.files[0];if(!f)return;if(!f.name.toLowerCase().endsWith(".sc2replay")){alert("Please select a .SC2Replay file"),m.target.value="";return}M=f,window.lastReplayFile=f;const b=document.getElementById("reparseLastReplayButton");b&&(b.style.display="inline-block"),m.target.value="",await C(f),pt();const k=document.getElementById("replayOptionsModal");k&&(k.style.display="block")}),function(){const f=document.getElementById("replayDropOverlay");if(!f)return;let b=0;function k(A){const x=A.dataTransfer;return x?x.types&&typeof x.types.includes=="function"?x.types.includes("Files"):!0:!1}function v(){f.style.display="flex",f.classList.add("active")}function T(){f.classList.remove("active"),f.style.display="none"}document.addEventListener("dragenter",A=>{k(A)&&(A.preventDefault(),b++,v())},!1),document.addEventListener("dragover",A=>{k(A)&&(A.preventDefault(),A.dataTransfer&&(A.dataTransfer.dropEffect="copy"),v())},!1),document.addEventListener("dragleave",A=>{k(A)&&(A.preventDefault(),b=Math.max(0,b-1),b===0&&T())},!1),document.addEventListener("drop",async A=>{var G,fe;if(!k(A))return;A.preventDefault(),b=0,T();const x=(fe=(G=A.dataTransfer)==null?void 0:G.files)==null?void 0:fe[0];if(!x)return;if(!x.name.toLowerCase().endsWith(".sc2replay")){alert("Please drop a .SC2Replay file");return}M=x,window.lastReplayFile=x;const z=document.getElementById("reparseLastReplayButton");z&&(z.style.display="inline-block"),await C(x),pt();const ae=document.getElementById("replayOptionsModal");ae&&(ae.style.display="block")},!1)}(),H("confirmReplayOptionsButton","click",async()=>{if(!M)return;const m=document.getElementById("confirmReplayOptionsButton");m.disabled=!0,m.innerText="‚è≥ Parsing...",await w(M),window.lastReplayFile=M;const f=document.getElementById("reparseLastReplayButton");f&&(f.style.display="inline-block"),m.disabled=!1,m.innerText="Parse Replay"}),H("reparseLastReplayButton","click",()=>{if(window.lastReplayFile){M=window.lastReplayFile;const m=document.getElementById("replayOptionsModal");m&&(m.style.display="block")}else alert("No replay file saved yet.")}),H("closeReplayOptionsModal","click",()=>{const m=document.getElementById("replayOptionsModal");m&&(m.style.display="none")});const L=document.getElementById("compactModeCheckbox");L&&L.addEventListener("change",()=>{if(L.checked){const m=document.getElementById("excludeTimeCheckbox");m&&(m.checked=!0)}});const S=document.getElementById("toggleStopTypeBtn"),_=document.getElementById("stopLimitInput"),N=document.getElementById("stopLimitLabel"),O=document.getElementById("stopUnitLabel");S&&_&&N&&O&&S.addEventListener("click",()=>{const m=S.dataset.type==="time"?"supply":"time";S.dataset.type=m,_.value="",m==="time"?(N.textContent="Stop at time:",S.textContent="Use Supply",_.placeholder="e.g. 5",_.step="1",O.style.display="inline"):(N.textContent="Stop at supply:",S.textContent="Use Time",_.placeholder="e.g. 50",O.style.display="none")});const j=document.getElementById("excludeTimeCheckbox");j&&j.addEventListener("change",()=>{if(!j.checked){const m=document.getElementById("compactModeCheckbox");m&&(m.checked=!1)}}),window.addEventListener("mousedown",m=>{const f=document.getElementById("replayOptionsModal");f&&m.target===f&&(f.style.display="none")}),H("buildOrderTitleText","click",()=>toggleTitleInput(!0)),H("buildOrderTitleText","focus",()=>toggleTitleInput(!0)),H("buildOrderTitleInput","blur",()=>toggleTitleInput(!1)),_o("buildCategoryDropdown",Ge),H("buildOrderHelpBtn","click",to),H("closeBuildOrderHelpModal","click",()=>{const m=document.getElementById("buildOrderHelpModal");m&&(m.style.display="none")}),window.addEventListener("mousedown",m=>{const f=document.getElementById("buildOrderHelpModal");f&&m.target===f&&(f.style.display="none")}),H("templateList","mouseover",m=>{const f=m.target.closest(".template-card");if(f){const b=JSON.parse(f.getAttribute("data-template"));Es(b)}}),H("legalNoticeLink","click",()=>{const m=document.getElementById("privacyModal");m&&(m.style.display="block")}),H("cookiePolicyLink","click",()=>{const m=document.getElementById("privacyModal");m&&(m.style.display="block")}),H("supportersLink","click",m=>{m.preventDefault(),Cs()}),H("closeSupportModal","click",()=>{const m=document.getElementById("supportModal");m&&(m.style.display="none")});const K=document.getElementById("supportModal");window.addEventListener("mousedown",m=>{K&&m.target===K&&(K.style.display="none")}),H("koFiButton","click",m=>{m.preventDefault(),window.kofiWidgetOverlay&&typeof window.kofiWidgetOverlay.open=="function"?window.kofiWidgetOverlay.open():window.open("https://ko-fi.com/zystem","_blank","noopener")}),H("closeSettingsModal","click",()=>{const m=document.getElementById("settingsModal");m&&(m.style.display="none")});const U=document.getElementById("settingsModal");window.addEventListener("mousedown",m=>{U&&m.target===U&&(U.style.display="none")});const F=document.getElementById("bracketInputToggle");F&&(F.checked=$e(),F.addEventListener("change",()=>{Ao(F.checked),Wt(),Ht()}));const J=document.getElementById("buildInputToggle");J&&(J.checked=Qt(),J.addEventListener("change",()=>{Po(J.checked),jt()}));const $=document.getElementById("mainClanSelect");$&&$.addEventListener("change",()=>{$o($.value)}),H("closePrivacyModal","click",()=>{const m=document.getElementById("privacyModal");m&&(m.style.display="none")}),window.addEventListener("mousedown",m=>{const f=document.getElementById("privacyModal");f&&m.target===f&&(f.style.display="none")}),window.addEventListener("keydown",m=>{m.key==="Escape"&&document.querySelectorAll(".modal").forEach(b=>{(b.style.display==="block"||b.style.display==="flex")&&(b.style.display="none")})}),H("closePublishModalButton","click",()=>{const m=document.getElementById("publishModal");m&&(m.style.display="none")}),H("savePublishSettingsButton","click",async()=>{var Ae;const m=Q.currentUser;if(!m)return;const f=window.currentBuildIdToPublish;if(!f){console.error("‚ùå No build selected to update.");return}const b=(Ae=document.getElementById("publishToCommunity"))==null?void 0:Ae.checked,k=Array.from(document.querySelectorAll(".clanPublishCheckbox:checked")).map(Me=>Me.value),v=q(V,`users/${m.uid}/builds/${f}`),T=await Z(v);if(!T.exists())return;const A=T.data(),x=ie(Y(V,"usernames"),ee("userId","==",m.uid)),z=await te(x),ae=z.empty?"Unknown":z.docs[0].id,G={...A,publisherId:m.uid,username:ae,isPublic:b,sharedToClans:k,isPublished:b||k.length>0};await Se(v,G,{merge:!0}),await Aa(f,{id:f,...G}),(b||k.length>0)&&Fe("build_published",{race:A.category,matchup:A.subcategory}),P("‚úÖ Publish settings updated!","success");const fe=document.getElementById("publishModal");fe&&(fe.style.display="none"),await Le(Ta())}),window.addEventListener("mousedown",m=>{const f=document.getElementById("publishModal"),b=f==null?void 0:f.querySelector(".modal-content.small-modal");f&&b&&f.style.display==="block"&&!b.contains(m.target)&&(f.style.display="none")});const D=document.getElementById("game-select");if(D){const m=D.querySelector(".selected-game"),f=D.querySelector(".game-dropdown");m.addEventListener("click",b=>{b.stopPropagation(),f.classList.toggle("open")}),document.addEventListener("click",b=>{D.contains(b.target)||f.classList.remove("open")})}H("shareBuildButton","click",async()=>{const m=Ft();if(!m){P("‚ö†Ô∏è You need to publish this build first before sharing.","error");return}const f=q(V,"publishedBuilds",m),b=await Z(f);if(!b.exists()){P("‚ùå Build not found.","error");return}const k=b.data(),v=z=>z.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/(^-|-$)+/g,""),T=(k.subcategory||"unknown").toLowerCase(),A=v(k.title||"untitled"),x=`${window.location.origin}/build/${T}/${A}/${m}`;if(navigator.share)try{await navigator.share({title:"Check out this SC2 Build Order",url:x})}catch(z){console.warn("Share canceled:",z)}else await navigator.clipboard.writeText(x),P("‚úÖ Link copied to clipboard!","success")}),Ja(),eo(),Pa(),Wt(),jt(),Ht(),wa(),ys(),tt(),window.addEventListener("resize",wt),window.addEventListener("scroll",wt,{passive:!0}),window.addEventListener("orientationchange",wt),setTimeout(tt,50),window.addEventListener("load",tt);try{document.fonts&&document.fonts.ready&&document.fonts.ready.then(()=>tt())}catch{}try{const m=new ResizeObserver(wt),f=document.querySelector(".toggle-header-right");f&&m.observe(f);const b=document.getElementById("box");b&&m.observe(b)}catch{}hs();const W=Bt(),X=sessionStorage.getItem("lastViewedBuild"),oe=W.findIndex(m=>m.id===X);oe!==-1&&An(oe),Ua(),Da();const re=(Bn=document.getElementById("replayLinkInput"))==null?void 0:Bn.value.trim(),de=document.getElementById("replayInputWrapper"),_e=document.getElementById("replayViewWrapper"),ge=document.getElementById("replayDownloadBtn");if(de&&(de.style.display="flex"),re&&_e&&ge){_e.style.display="block",ge.href=re;const m=document.getElementById("replayDownloadBtn");m&&(m.innerText="Download Replay")}else _e&&(_e.style.display="none");if(document.getElementById("map-preview-container")){qa();let m=!1;async function f(){if(m)return;const b=await fs(),k=typeof b.initializeInteractiveMap=="function"?b.initializeInteractiveMap():null;typeof b.initializeMapControls=="function"&&b.initializeMapControls(k),typeof b.renderMapCards=="function"&&await b.renderMapCards("current"),typeof b.loadMapsOnDemand=="function"&&b.loadMapsOnDemand(),m=!0}H("openMapModalButton","click",async()=>{await f();const b=document.getElementById("mapSelectionModal");b&&(b.style.display="block")})}async function mt(m){var k;const f=q(V,"users",m.uid),b=await Z(f);if(b.exists()){const v=b.data()||{},T=v.username||"Guest";document.getElementById("userName").innerText=T;const A=((k=v==null?void 0:v.profile)==null?void 0:k.avatarUrl)||(v==null?void 0:v.avatarUrl)||"img/avatar/marine_avatar_1.webp";document.getElementById("userPhoto").src=A,document.getElementById("userNameMenu").innerText=T}else console.log("No user data found!")}(In=document.getElementById("mapVetoBtn"))==null||In.addEventListener("click",()=>{window.location.href="/veto.html"}),(Cn=document.getElementById("mapVetoTile"))==null||Cn.addEventListener("click",()=>{window.location.href="/veto.html"}),(kn=document.getElementById("showStatsButton"))==null||kn.addEventListener("click",()=>{const m=document.getElementById("userMenu");m&&(m.style.display="none"),Yn()}),(Ln=document.getElementById("closeUserStatsModal"))==null||Ln.addEventListener("click",Gn),window.addEventListener("mousedown",m=>{const f=document.getElementById("userStatsModal");f&&m.target===f&&Gn()});const De=document.getElementById("userMenu");De&&De.addEventListener("click",m=>{m.target.closest(".menu-item")&&(De.style.display="none")}),(Sn=document.getElementById("settingsBtn"))==null||Sn.addEventListener("click",()=>{const m=document.getElementById("userMenu");m&&(m.style.display="none");const f=document.getElementById("settingsModal");if(f){f.style.display="block";const b=document.getElementById("bracketInputToggle");b&&(b.checked=$e()),Yt()}}),document.getElementById("clanModal"),(Mn=document.getElementById("showClanModalButton"))==null||Mn.addEventListener("click",()=>{const m=document.getElementById("userMenu");m&&(m.style.display="none");const f=document.getElementById("clanModal");f.style.display="block",Rt("find"),["create","manage","find"].forEach(b=>{const k=document.getElementById(`${b}ClanBtn`);k&&k.addEventListener("click",()=>{if(Oe===b)return;Oe=b,document.querySelectorAll(".clan-subview").forEach(T=>{T.style.display="none"}),document.querySelectorAll(".clan-main-tab-button").forEach(T=>T.classList.remove("active")),k.classList.add("active");const v=document.getElementById(`${b}ClanView`);v&&(v.style.display="block"),b==="create"&&Jt(),b==="manage"&&Ee(),b==="find"&&at()})})}),(xn=document.getElementById("closeClanModal"))==null||xn.addEventListener("click",()=>{document.getElementById("clanModal").style.display="none",Oe=null}),window.addEventListener("mousedown",m=>{const f=document.getElementById("clanModal");!f||f.style.display!=="block"||m.target===f&&(f.style.display="none",Oe=null)});function Rt(m){var b;document.querySelectorAll(".clan-subview").forEach(k=>{k.style.display="none"});const f=document.getElementById(`${m}ClanView`);f&&(f.style.display="block"),at(),document.querySelectorAll(".clan-main-tab-button").forEach(k=>k.classList.remove("active")),(b=document.getElementById(`${m}ClanBtn`))==null||b.classList.add("active")}try{const m=localStorage.getItem("openSettingsOnLoad")==="true",f=localStorage.getItem("openStatsOnLoad")==="true",b=localStorage.getItem("openClanModalOnLoad")==="true";if(m){localStorage.removeItem("openSettingsOnLoad");const k=document.getElementById("settingsModal");if(k){k.style.display="block";const v=document.getElementById("bracketInputToggle");v&&(v.checked=$e()),await Yt()}}if(f&&(localStorage.removeItem("openStatsOnLoad"),await Yn()),b){localStorage.removeItem("openClanModalOnLoad");const k=document.getElementById("clanModal");k&&(k.style.display="block",Rt("find"),["create","manage","find"].forEach(v=>{const T=document.getElementById(`${v}ClanBtn`);T&&!T.dataset._handlerAttached&&(T.addEventListener("click",()=>{if(Oe===v)return;Oe=v,document.querySelectorAll(".clan-subview").forEach(x=>x.style.display="none"),document.querySelectorAll(".clan-main-tab-button").forEach(x=>x.classList.remove("active")),T.classList.add("active");const A=document.getElementById(`${v}ClanView`);A&&(A.style.display="block"),v==="create"&&Jt(),v==="manage"&&Ee(),v==="find"&&at()}),T.dataset._handlerAttached="true")}))}}catch{}function Ge(){const m=document.getElementById("buildCategoryDropdown");if(m){const b=m.options[m.selectedIndex].parentElement;if(b){const k=window.getComputedStyle(b).color;m.style.color=k||""}}}function pt(){const m=document.getElementById("chronoBoostWarning");if(!m)return;const f=Number(xe),b=Je.find(k=>k.pid===f);b&&b.race&&b.race.toLowerCase()==="protoss"?m.style.display="inline":m.style.display="none"}function Ua(){const m=document.querySelectorAll("#buildsModal .filter-category"),f=document.querySelectorAll("#communityModal .filter-category"),b=document.querySelectorAll("#buildsModal .subcategory"),k=document.querySelectorAll("#communityModal .subcategory");m.forEach(v=>{v.addEventListener("click",async T=>{if(T.target.closest(".subcategory"))return;const A=v.getAttribute("data-category");if(!A)return;if(window.innerWidth<=768){const z=v.classList.contains("show-submenu");document.querySelectorAll("#buildsModal .filter-category.show-submenu").forEach(G=>{G!==v&&G.classList.remove("show-submenu")}),v.querySelector(".submenu")&&(z?v.classList.remove("show-submenu"):v.classList.add("show-submenu"))}m.forEach(z=>z.classList.remove("active")),b.forEach(z=>z.classList.remove("active")),v.classList.add("active"),document.getElementById("buildSearchBar").value="",Le(A);const x=document.querySelector("#buildsModal .template-header h3");x&&(x.textContent=A.toLowerCase()==="all"?"Build Orders":`Build Orders - ${ve(A)}`)})}),f.forEach(v=>{v.addEventListener("click",async T=>{if(T.target.closest(".subcategory"))return;const A=v.getAttribute("data-category");if(!A)return;if(window.innerWidth<=768){const z=v.classList.contains("show-submenu");document.querySelectorAll("#communityModal .filter-category.show-submenu").forEach(G=>{G!==v&&G.classList.remove("show-submenu")}),v.querySelector(".submenu")&&(z?v.classList.remove("show-submenu"):v.classList.add("show-submenu"))}f.forEach(z=>z.classList.remove("active")),k.forEach(z=>z.classList.remove("active")),v.classList.add("active"),document.getElementById("communitySearchBar").value="",await Re(A);const x=document.querySelector("#communityModal h3");x&&(x.textContent=A.toLowerCase()==="all"?"Community Builds":`Community Builds - ${ve(A)}`)})})}function Da(){const m=document.querySelectorAll("#buildsModal .subcategory"),f=document.querySelectorAll("#communityModal .subcategory");m.forEach(b=>{b.addEventListener("click",async k=>{k.stopPropagation();const v=b.getAttribute("data-subcategory");if(!v)return;document.querySelectorAll("#buildsModal .filter-category").forEach(x=>x.classList.remove("active")),m.forEach(x=>x.classList.remove("active")),b.classList.add("active");const T=b.closest(".filter-category");T&&T.classList.add("active"),document.getElementById("buildSearchBar").value="",await Le(v);const A=document.querySelector("#buildsModal .template-header h3");if(A&&(A.textContent=`Build Orders - ${ve(v)}`),window.innerWidth<=768){const x=b.closest(".filter-category");x&&x.classList.remove("show-submenu")}})}),f.forEach(b=>{b.addEventListener("click",async k=>{k.stopPropagation();const v=b.getAttribute("data-subcategory");if(!v)return;document.querySelectorAll("#communityModal .filter-category").forEach(x=>x.classList.remove("active")),f.forEach(x=>x.classList.remove("active")),b.classList.add("active");const T=b.closest(".filter-category");T&&T.classList.add("active"),document.getElementById("communitySearchBar").value="",await Re(v);const A=document.querySelector("#communityModal h3");if(A&&(A.textContent=`Community Builds - ${ve(v)}`),window.innerWidth<=768){const x=b.closest(".filter-category");x&&x.classList.remove("show-submenu")}})})}H("templateMenuButton","click",m=>{m.stopPropagation();const f=document.getElementById("templateDropdown");f&&f.classList.toggle("active")}),window.addEventListener("click",m=>{const f=document.getElementById("templateDropdown"),b=document.getElementById("templateMenuButton");f&&b&&!f.contains(m.target)&&!b.contains(m.target)&&f.classList.remove("active")});function qa(){var k;const m=document.getElementById("map-preview-container"),f=document.getElementById("mapSelectionModal");if(!m||!f)return;const b=document.getElementById("map-preview-image");m.addEventListener("click",()=>{b&&b.getAttribute("src")||(f.style.display="block")}),(k=document.querySelector(".builds-container"))==null||k.addEventListener("click",v=>{const T=v.target.closest(".map-card");if(T){const A=R.sanitize(T.getAttribute("data-map")),x=R.sanitize(T.querySelector(".map-card-title").innerText),z=document.getElementById("map-preview-image"),ae=document.getElementById("selected-map-text");z&&(z.src=A),ae&&(ae.innerText=x),Pe(),f.style.display="none"}}),window.addEventListener("mousedown",v=>{v.target===f&&(f.style.display="none")})}function za(){["buildOrderInput","descriptionInput","videoInput","replayLinkInput","buildOrderTitleInput"].forEach(b=>{const k=document.getElementById(b);k&&!k.dataset.monitorAttached&&(k.addEventListener("input",()=>{if(s.disabled=!1,b==="buildOrderTitleInput"){const v=document.getElementById("buildOrderTitleText"),T=document.getElementById("buildOrderTitleInput"),A=k.value.trim().toLowerCase(),x=Bt(),z=Ft();x.some(G=>!G.imported&&G.title.toLowerCase()===A&&G.id!==z)?(s.disabled=!0,v&&v.classList.add("highlight"),T&&(T.classList.add("highlight"),T.setAttribute("data-tooltip","Title cannot match an existing build in My Builds"),ke(),Do(T))):(v&&v.classList.remove("highlight"),T&&(T.classList.remove("highlight"),T.removeAttribute("data-tooltip"),ke(),qo(T)))}}),k.dataset.monitorAttached="true")});const f=document.getElementById("buildCategoryDropdown");f&&!f.dataset.monitorAttached&&(f.addEventListener("change",()=>{s.disabled=!1}),f.dataset.monitorAttached="true")}}export{pn as M,be as _,Q as a,rt as b,ko as c,H as d,P as e,fa as f,Bt as g,V as h,$e as i,Fe as j,cn as k,fn as l,me as m,_s as n,Un as o,Ut as p,Pt as q,xs as r,lt as s,Ts as t,ia as u};
